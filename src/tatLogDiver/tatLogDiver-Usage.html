<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
<p>Ver. b18.02.25, Last update: 2019/06/01, (c)2017-2019 hirosejn </p>
<h1 id="index">Index</h1>
<p><a href="#environment"><strong>Environment　動作環境</strong></a></p>
<p><a href="#items"><strong>Items　画面の構成要素</strong></a></p>
<p><a href="#graph"><strong>Graph　グラフの操作方法</strong></a></p>
<p><a href="#menu"><strong>Menu　メニューの操作方法</strong></a></p>
<ol>
<li><a href="#menu-file">&gt; File</a></li>
<li><a href="#menu-filter">&gt; Filter</a></li>
<li><a href="#menu-simulator">&gt; Simulator</a></li>
<li><a href="#menu-view">&gt; View</a></li>
<li><a href="#menu-download">&gt; Download</a></li>
<li><a href="#menu-bottomdetailgraph">&gt; Bottom detail graph</a></li>
<li><a href="#menu-help">&gt; Help</a></li>
</ol>
<p><a href="#simulator"><strong>Simulator　シミュレーションシナリオの仕様</strong></a></p>
<ol>
<li><a href="#simulator-01">Simulator-01　サンプル01(1 hour with table block.)の仕様</a></li>
<li><a href="#simulator-99">Simulator-99　サンプル99(for test)の仕様</a></li>
</ol>
<hr>
<h2 id="environment">Environment</h2>
<h2 id="動作環境-↑">動作環境　<a href="#">↑</a></h2>
<ul>
	<li><p>Chrome：Ver74以降にて動作検証（推奨）</p></li>
	<li><p>Edge：基本動作検証済</p></li>
	<li><p>ie8 ：基本動作検証済、注：Chroneに比べ5倍程度遅い。</p></li>
</ul>
<hr>
<h2 id="items">Items</h2>
<h2 id="画面の構成要素-↑">画面の構成要素　<a href="#">↑</a></h2>
<ul>
	<li><strong>右メニュー</strong>
		<br>：機能をアコーディオンメニュー形式で表示</li>
	<li><strong>右上メッセージエリア</strong>
		<br>：ファイル読込処理結果等のメッセージを表示（ダイアログの操作で移動／リサイズ可）</li>
	<li><strong>上段全体グラフ</strong>
		<br>：指定ファイルを、フィルター条件でフィルターしたデータを表示</li>
	<li><strong>下段詳細グラフ</strong>
		<br>：上段表示データのうち「下段詳細グラフ表示条件」による指定期間のデータを表示</li>
	<li><strong>下段データ表示エリア</strong>
		<br>：下段詳細グラフで、マウスオーバにより選択されたプロットに該当する、ファイルのレコードを表示。（ダイアログの操作で移動／リサイズ可）</li>
	<li><strong>ダイアログ</strong>：
		<br>【閉じる】：ダイアログ右上のバツボタン。
		<br>【移動】：上部にマウスオーバすると表示されるグレーのバーをドラッグする。
		<br>【リサイズ】：四隅四辺にマウスオーバし、マウスがリサイズアイコンになった状態からドラッグする。</li>
</ul>
<hr>
<h2 id="graph">Graph</h2>
<h2 id="グラフの操作方法-↑">グラフの操作方法　<a href="#">↑</a></h2>
<ul>
	<li><p><strong>マウスオーバー</strong> ：X軸の最も近い時刻のプロットが選択され強調表示される。</p>
	<blockquote>
		<p>　下段グラフの場合は、選択プロットの時刻に同時処理(CONC)している処理の開始時刻―終了時刻を結ぶ線が表示される（同時処理が視認し易く表示されるので、容易に排他解放待ちの有無を特定できる）。下部データ表示エリアに、選択プロットの元ファイルのレコードが表示される（排他処理を容易に特定できる）。</p>
	</blockquote>
	</li>
	<li><p><strong>マウスクリック／タッチ</strong> ：選択されたプロットを基準に、下段詳細グラフが更新され、「下段詳細グラフ表示条件」アイコンが追加される。</p></li>
	<li><p><strong>マウスドラッグ（横／縦）</strong> ：指定範囲を横幅／縦幅としてグラフを拡大表示する。</p></li>
	<li><p><strong>マウスダブルクリック</strong> ：マウスドラッグによるグラフの拡大表示をリセットする。（左上の「reset zoom」ボタンも同一機能）</p></li>
</ul>
<hr>
<h2 id="menu">Menu</h2>
<h2 id="メニューの操作方法-↑">メニューの操作方法　<a href="#">↑</a></h2>
<ul>
	<li><strong>メッセージ表示エリア</strong> ：処理結果メッセージを表示する。マウスによる移動（エリア上部選択）／リサイズに対応。</li>
	<li><strong>Place on/side</strong> ボタン：メニューをグラフに「重ねる／重ねない」を切り替える。</li>
	<li><strong>reset zoom</strong> ボタン：グラフの描画サイズを初期化する。（Androidでグラフのダブルクリックができないため設置）</li>
	<li><strong>バツ／ハンバーガー</strong> ボタン：メニューの「表示／非表示」を切り替える</li>
</ul>
<h3 id="menu-file">Menu-File</h3>
<h2 id="メニュー／fileの操作方法-↑">メニュー／Fileの操作方法　<a href="#">↑</a></h2>
<h4>ボタン</h4>
<ul>
	<li><p><strong>Open csv data file</strong> ボタン：CSVファイルを選択。ファイルを選択するとグラフを表示する。</p></li>
</ul>
<h4>指定項目</h4>
<ul>
	<li><p><strong>Open file as</strong> ：データ読込モード指定</p>
	<blockquote>
		<p> <strong>◎newly</strong> ：新規に読み込む（既存データを破棄） <strong>○append</strong> ：既存データに指定ファイルの内容を追加する</p>
	</blockquote>
	</li>
</ul>
<h4>----- File format definition --------</h4>
<ul>
	<li><p><strong>[Line feed code]</strong> ：CSVファイルの改行コードを指定</p>
	<blockquote>
		<p><strong>○固定長 &quot;80&quot;byte</strong> ／ <strong>◎Windows:CR(13)+CF(10)</strong>
			 ／ <strong>○UNIX/Linux:LF(10)</strong> ／ <strong>○zOS:NEL(15)</strong> ／ <strong>○Max:CR(13)</strong>
			  ／ <strong>○other charcode (&quot; &quot;)</strong> 文字コード番地を10進で指定</p>
	</blockquote>
	</li>
	<li><p><strong>[Charset]</strong> ：CSVファイルの文字コードを指定（レコードデータ表示時に指定文字コードからUnicodeに変換して表示）</p>
	<blockquote>
		<p><strong>○Shift-JIS</strong> ／<strong>○EUC-JP</strong> ／  <strong>◎UTF-8</strong> ／ <strong>○Unicode</strong></p>
	</blockquote>
	</li>
	<li><p><strong>[CSV delimiter]</strong> ：CSVファイルのデリミタを指定</p>
	<blockquote>
		<p><strong>○comma</strong> ：カンマ区切り／ <strong>◎tab</strong> ：タブ区切り／ <strong>○other &quot;,&quot;</strong>  区切り文字を指定する</p>
	</blockquote>
	</li>
</ul>
<h4>----- Data format definition --------</h4>
<ul>
	<li><p><strong>　</strong>CSVのカラムが保有するデータ構成を指定</p>
	<blockquote>
		<p><strong>○TAT &amp; START time</strong> ／<strong>◎TAT &amp; END time</strong> ／  <strong>○START &amp; END time</strong></p>
	</blockquote>
	</li>
	<li><p><strong>[Timestamp field]</strong> ：終了時刻のフィールドの位置とフォーマットを指定</p>
	<blockquote>
		<p><strong>&quot;1&quot;th column of CSV</strong>：CSVのカラム位置を指定（デフォルト1カラム目、固定長レコードの場合1を指定）</p>
		<p><strong>Position(byte): from &quot;1&quot; length &quot; &quot;</strong>
			：レコード内の固定バイト位置指定　レコードのfromバイト目から、length指定バイト長</p>
		<p><strong>Format</strong> :時刻のフォーマット</p>
		<p><strong>◎text &quot;YYYY/MM/DD hh.mm.ss.000&quot;</strong>
			 ：指定カラムのYYYY MM DD hh mm ss 000の位置から値を取得（エクセルの表示フォーマット： YYYY/MM/DD hh:mm:ss.000 に相当）</p>
		<p>　／ <strong>◎(num)text</strong> ／ <strong>○long</strong>
			 ：text：ユリウス日0:00との時差数値　テキスト数値／long(4バイト)数値（別途エンディアン指定)</p>
		<p><strong>Units of numbers:</strong> <strong>○msec</strong> ／ <strong>◎sec</strong>
			 ：(num)textもしくはlong選択時に、数値の単位をmsec/secから選択</p>
	</blockquote>
	</li>
</ul>
<ul>
	<li><p><strong>[TAT or START/END judgment field]</strong> ：処理時間(TAT)フィールド　もしくは、開始／終了レコード判定フィールド の位置とフォーマットを指定</p>
	<blockquote>
		<p><strong>&quot;2&quot;th column of CSV</strong>：CSVのカラム位置を指定（デフォルト2カラム目、固定長レコードの場合1を指定）</p>
		<p><strong>Position(byte): from &quot;1&quot; length &quot; &quot;</strong>：固定バイト位置指定　指定カラムのfromバイト目から、length指定バイト長</p>
	</blockquote>
		<strong>for TAT(turnaround time) condition</strong> ：処理時間(TAT)フィールド　の条件
	<blockquote>
		<p><strong>Units of numbers:</strong> <strong>○msec</strong> ／ <strong>◎sec</strong>
			 ：処理時間の単位　msec/secから選択</p>
		<p><strong>Format:◎(num)text</strong> ／ <strong>○long</strong>
			 ：処理時間のフォーマット　テキスト数値／long(4バイト)数値</p>
		<p><strong>for long Endian:  ◎little</strong> ／ <strong>○big</strong>
			 ：long指定時のエンディアンを選択　リトルエンディアン／ビッグエンディアン</p>
	</blockquote>
	<strong>for START/END judgment condition</strong> ：開始／終了レコード判定フィールド　の条件
	<blockquote>
		<p><strong>START record: Matches:/"START"/</strong>：指定正規表現（デフォルト/START/）に合致するレコードを開始レコードとする</p>
		<p><strong>END record: Matches:/"END"/</strong>：指定正規表現(デフォルト/END/)に合致するレコードを終了レコードとする</p>
	</blockquote>
</ul>
<ul>
<li><p><strong>[START-END pairing KEY field]</strong>
		 ：開始／終了レコードなど同一取引と判定するキーフィールドを指定</p>
<blockquote>
	<p><strong>&quot;3&quot;th column of CSV</strong>
		：CSVのカラム位置を指定（デフォルト2カラム目、固定長レコードの場合1を指定）</p>
	<p><strong>Position(byte): from &quot;1&quot; length &quot; &quot;</strong>
		：固定バイト位置指定　指定カラムのfromバイト目から、length指定バイト長</p>
	<p><strong>&amp;Position(Matches reg. exp.):</strong>
		：かつ、以下の正規表現に合致する文字列に間（空欄のときは先頭～末尾）、</p>
	<p><strong>between /" "/ and /" "/</strong></p>
	<p><strong>&amp;Adopt as KEY: Matches /"[0-9A-Z]+"/</strong>
		:かつ、指定の正規表現に合致する文字列</p>
</blockquote>
</ul>
<h4>ボタン</h4>
<ul>
	<li><p><strong>save format (.json)</strong> ボタン
		：メニュー指定項目を、JSON形式のファイルでダウンロードする</p></li>
	<li><p><strong>load format (.json)</strong> ボタン
		： JSON形式のファイルから、メニュー指定項目を読み込む</p></li>
</ul>
<h3 id="menu-filter">Menu-Filter</h3>
<h2 id="メニュー／filterの操作方法-↑">メニュー／Filterの操作方法　<a href="#">↑</a></h2>
<ul>
<li><p><strong>Sync ○Upper ○Detail ◎Async</strong> 指定：表示しているグラフの条件をフィルター条件に取り込む</p>
<blockquote>
<p>　Upperを選択したタイミングで上段グラフを取り込む／Detailを選択したタイミングで下段グラフ／Asyncを選択した際には何も変更しない</p>
</blockquote>
</li>
<li><p><strong>[Date filter]</strong> 指定機能</p>
<blockquote>
<p><strong>Include if end time is between &quot;YYYY/MM/DD hh.mm.ss.000&quot; and &quot;YYYY/MM/DD hh.mm.ss.000&quot;</strong> ：</p>
<p>　指定期間のデータのみを上段グラフの表示対象とする。時刻を手入力する作業は時間がかかるので Sync Upper/Detail で現在描画している情報を取り込んでから修正する操作を想定</p>
</blockquote>
</li>
<li><p><strong>[Turnaround time(TAT) filter]</strong> 指定機能：</p>
<blockquote>
<p><strong>Include if TAT is between &quot;0①&quot; and &quot;数値②&quot;</strong> ：</p>
<p>　処理時間(TAT)が①～②のデータのみを上段グラフの表示対象とする</p>
</blockquote>
</li>
<li><p><strong>[Text filter]</strong> 指定機能：</p>
<blockquote>
<p><strong>◎Don&#39;t use. ○Include ○Exclude</strong></p>
<p> <strong>if &quot;数値①&quot; bytes from the &quot;1②&quot;th byte from head of the &quot;3③&quot;th column of CSV match the regular expression &quot;④&quot;</strong> ：</p>
<p>　テキストフィルターを使わない／正規表現に合致するデータを処理対象とする／正規表現に合致しないデータを処理対象とする</p>
<p>　CSVレコードの、③番目のカラムの、先頭②バイト目から、①バイトの文字列を、正規表現④に照らして評価</p>
</blockquote>
</li>
</ul>
<h3 id="menu-simulator">Menu-Simulator</h3>
<h2 id="メニュー／simulatorの操作方法-↑">メニュー／Simulatorの操作方法　<a href="#">↑</a></h2>
<p>TAT log diver を起動すると、サンプルシミュレーションシナリオ１を初期表示する。</p>
<ul>
<li><strong>Simulate</strong> ボタン：指定したシミュレーションシナリオを実行しグラフを表示する。</li>
<li><strong>JSON Editor(Open/Close)</strong> ボタン：シミュレーションシナリオ編集画面を開く／編集画面が開いている場合は閉じる。</li>
<li><strong>サンプルシナリオ選択機能</strong> ：サンプルシナリオを選択します。異なるシナリオを選択したタイミングでシミュレーション実行しグラフを再描画する。</li>
</ul>
<h3 id="menu-view">Menu-View</h3>
<h2 id="メニュー／viewの操作方法-↑">メニュー／Viewの操作方法　<a href="#">↑</a></h2>
<p>上4つのチェックボックス（一部機能）で、上段全体グラフ上の表示有無を指定</p>
<p>下7つのチェックボックス（全機能）で、下段詳細グラフ上の表示有無を指定</p>
<ul>
<li><p><strong>多重度（詳細）</strong> ：青　左Y軸　上段なし／下段☒</p>
<blockquote>
<p>同時処理数（多重度）をヒストグラム形式で表示</p>
</blockquote>
</li>
<li><p><strong>多重度（区間最大）/sec</strong> ：水色　左Y軸　上段☒／下段☒</p>
<blockquote>
<p>1秒間の区間の多重度の最大値</p>
<p>上段グラフ：透過プロットで表示。同一多重度が連続するとプロットが重なり濃く見える</p>
<p>下段グラフ：ヒストグラム形式で表示。多重度（詳細）と重ねて表示すると秒間最大値との関係を把握できる</p>
</blockquote>
</li>
<li><p><strong>average tps / min (end) [line]</strong> ：緑　左Y軸　上段☒／下段☒</p>
<blockquote>
<p>1分間の平均tps。コンピュータの処理数は1分毎にとられることが多いため、突合しやすいように表示</p>
</blockquote>
</li>
<li><p><strong>response by start time [Y2軸:plot]</strong> ：黄　右Y軸　上段なし／下段☒</p>
<blockquote>
<p>X軸：処理開始時刻、Y軸(点の高さ)は処理時間</p>
</blockquote>
</li>
<li><p><strong>response by end time [Y2軸:plot]</strong> ：茶　右Y軸　上段なし／下段☒</p>
<blockquote>
<p>X軸：処理終了時刻、Y軸(点の高さ)は処理時間</p>
</blockquote>
</li>
<li><p><strong>max response / min (end) [Y2軸:line]</strong> ：赤　右Y軸　上段☒／下段☒</p>
<blockquote>
<p>1分間の最大レスポンス（処理終了時刻ベース）、ヒストグラム風折れ線で表示</p>
</blockquote>
</li>
<li><p><strong>average response / min (end) [Y2軸:line]</strong> ：ピンク　右Y軸　上段☒／下段☐</p>
<blockquote>
<p>1分間の平均レスポンス（処理終了時刻ベース）、ヒストグラム風折れ線で表示。コンピュータの処理数は1分毎にとられることが多いため、突合しやすいように表示機能を設けているがデフォルト非表示</p>
</blockquote>
</li>
</ul>
<h3 id="menu-download">Menu-Download</h3>
<h2 id="メニュー／downloadの操作方法-↑">メニュー／Downloadの操作方法　<a href="#">↑</a></h2>
<ul>
<li><strong>Upper graph image(.png)</strong> ボタン：上段グラフの図をpng形式で、初期ファイル名 graph.png でダウンロード。</li>
<li><strong>Upper graph data(.csv)</strong> ボタン：上段グラフに表示しているデータを、CSV形式で（改行コード、デリミタはFileメニューの指定値を適用）初期ファイル名 graph.csv でダウンロード。</li>
<li><strong>Upper graph log records(.csv)</strong> ボタン：上段グラフに表示しているデータの元データを、処理終了時刻順に、入力ファイルのレコードフォーマット（改行コード、デリミタ等も元ファイルのまま加工せずに適用）で、初期ファイル名 tatlog.csv でダウンロード。<blockquote>
</blockquote>
</li>
<li><strong>Detail graph image(.png)</strong> ボタン：下段グラフに対して上段と同じ処理。</li>
<li><strong>Detail graph data(.csv)</strong> ボタン：下段グラフに対して上段と同じ処理。</li>
<li><strong>Detail graph log records(.csv)</strong> ボタン：下段グラフに対して上段と同じ処理。</li>
<li><strong>Detail conc log records(.csv)</strong> ボタン：下段グラフに表示用に選択したCONC（同時処理数）時に処理しているデータを、処理終了時刻順に、入力ファイルのレコードフォーマットで、初期ファイル名 conclog.csv でダウンロード。（CONC指定時以外の場合はCONC最大値を基準）。</li>
</ul>
<h3 id="menu-bottomdetailgraph">Menu-BottomDetailGraph</h3>
<h2 id="メニュー／bottom-detail-graphの操作方法-↑">メニュー／Bottom detail graphの操作方法　<a href="#">↑</a></h2>
<p>下段詳細グラフの表示条件を指定する</p>
<ul>
<li><p><strong>Range: - &quot;1①&quot; + &quot;2②&quot; &quot;10sec③&quot;</strong> 指定機能：下段グラフの期間を指定する</p>
<blockquote>
<p>「下段詳細グラフ表示条件」の基準時刻を③単位で切り捨てた時刻を基準に、-①数値×③単位　～ +②数値×③単位　を下段グラフの表示データ抽出期間とする。③単位はsec/10sec/min/hour/6hour/day/year から選択</p>
<p>指定値を変更する都度、指定値を「下段詳細グラフ表示条件」に反映し下段グラフを再描画する。なお、グラフ上の範囲指定による表示期間変更は描画のみで「下段詳細グラフ表示条件」には反映されない。</p>
</blockquote>
</li>
<li><p><strong>「下段詳細グラフ表示条件」</strong> アイコン ：下段グラフに表示する条件を選択する機能（初期表示：同時処理数が最大となるタイミングを１つ）</p>
<blockquote>
<p>上段／下段グラフの任意の点をクリックすると、「下段詳細グラフ表示条件」アイコン　が追加される。アイコンは基準時刻順に縦に並ぶ。</p>
<p>下段グラフに表示している「下段詳細グラフ表示条件」アイコンは背景グレー。他のアイコンは背景白</p>
<p>アイコンにマウスをのせると、アイコンの左側にマイナス「－」アイコンが表示され、「－」をクリックすると該当「下段詳細グラフ表示条件」アイコンが削除される。</p>
</blockquote>
</li>
</ul>
<h3 id="menu-help">Menu-Help</h3>
<h2 id="メニュー／helpの操作方法-↑">メニュー／Helpの操作方法　<a href="#">↑</a></h2>
<ul>
<li><strong>about TAT log diver</strong> ボタン：&quot;TAT log diver&quot;のコピーライト、関連ＵＲＬをダイアログ表示</li>
</ul>
<hr>
<h2 id="simulator">Simulator</h2>
<h2 id="シミュレーションシナリオの仕様-↑">シミュレーションシナリオの仕様　<a href="#">↑</a></h2>
<h3 id="simulator-01">Simulator-01</h3>
<h2 id="サンプル011-hour-with-table-blockの仕様-↑">サンプル01(1 hour with table block.)の仕様　<a href="#">↑</a></h2>
<ul>
<li>概要</li>
</ul>
<p><strong>数秒のバッチが、通常0.5秒以下の更新系オンのレスポンス遅延を起こす。更新系集中時に滞留増により遅延長時間化</strong></p>
<p>online[100-500ms 2-5tps]：レスポンス100～500ミリ秒のオンライン取引を２～５tpsで発行。16:30～16:36に更新系オン2割増</p>
<p>batch[2-5sec evry3min]：処理時間２～５秒のオン中バッチ取引（DB更新あり）を３分毎に起動</p>
<ul>
<li>詳細</li>
</ul>
<p>{
&quot;log&quot; : 1,</p>
<blockquote>
<p>エラーログのみ出力</p>
<p>　log（任意、デフォルト3）:詳細ログ出力指定(0:なし, 1:エラー時のみ, 2:+ETAT, 3:+push/pop, 4:+HOLD/FREE)</p>
</blockquote>
<p>&quot;start&quot; : &quot;2017/01/02 00:00:00.000&quot;,
&quot;end&quot;   : &quot;17.0*h&quot;,</p>
<blockquote>
<p>2017/01/02 00:00:00.000 を基準、最大17時間後までシミュレーション実行</p>
<p>シミュレーション開始時刻/終了時刻&quot;,</p>
</blockquote>
<p>&quot;resources&quot; : [</p>
<blockquote>
<p>システム構成定義： &quot;type:リソース名、thread:最大同時hold数、timeout：holdタイムアウト時間&quot;、q:最大hold待ち数、qWait:最大hold待ち時間&quot;</p>
</blockquote>
<p>  {&quot;type&quot; :&quot;WEB&quot;, &quot;thread&quot;:1024,&quot;timeout&quot;:&quot;300*sec&quot;, &quot;q&quot;:1280, &quot;qWait&quot;:0},</p>
<blockquote>
<p>WEBサーバ：1024スレッド、タイムアウトエラー：300秒、スレッド溢れ時：即時エラー</p>
</blockquote>
<p>  {&quot;type&quot; :&quot;AP&quot;,  &quot;thread&quot;:20,  &quot;timeout&quot;:&quot;300*sec&quot;, &quot;q&quot;:1280, &quot;qWait&quot;:0},</p>
<blockquote>
<p>APサーバ：20スレッド、タイムアウトエラー：300秒、スレッド溢れ時：即時エラー</p>
</blockquote>
<p>  {&quot;type&quot; :&quot;DB&quot;,  &quot;thread&quot;:10,  &quot;timeout&quot;: &quot;10<em>sec&quot;, &quot;q&quot;:10,  &quot;qWait&quot;:&quot;10</em>sec&quot;}</p>
<blockquote>
<p>DBサーバ：10スレッド、SQL処理タイムアウトエラー：10秒、コネクションプール：10個、コネクション取得待ち：10秒でエラー</p>
</blockquote>
<p>],</p>
<p>&quot;models&quot; : [</p>
<blockquote>
<p> &quot;models:clientsで指定するモデル名(model)の定義、以下modelsで指定できる項目&quot;,</p>
<p> &quot;baseModel:複数リソースのsequenceをまとめて宣言できる、sequenceに展開した後処理される、任意指定&quot;,</p>
<p> &quot;sequence:指定された順にリソースを取得する、配列内に複数指定可、sequenceも複数指定可&quot;,</p>
<p> &quot;hold：リソース名、holds(baseModelのみ指定可）：リソース一覧、各々にtat/tatMinが適用される&quot;,</p>
<p> &quot;tat/tatMin：リソースの取得に要する平均/最小時間、tatMinのデフォルトはtat&quot;,</p>
<p> &quot;　　　　　　★注：tatはリソースの使用時間ではない、リソース使用時間を指定す場合はfreeで指定&quot;,</p>
<p> &quot;数値はミリ秒単位、<em>ms,</em>sec,<em>min,</em>h,*day 指定可&quot;,</p>
<p> &quot;times：繰返し回数&quot;,</p>
<p> &quot;thinkTime/thinkTimeMin：繰返し時の間隔の平均/最小時間、thinkTimeMinのデフォルトはthinkTime&quot;,</p>
<p> &quot;free：[リソース名の配列]、指定リソースを開放する、free指定の無いリソースはシーケンスの最後にfreeされる&quot;,</p>
</blockquote>
<p>  { &quot;ON-1&quot; : {
    &quot;times&quot;: 60, &quot;thinkTimeMin&quot;:&quot;3<em>sec&quot;, &quot;thinkTime&quot;: &quot;10</em>sec&quot;,
    &quot;baseModel&quot;:  {&quot;holds&quot;: [&quot;WEB&quot;,&quot;AP&quot;,&quot;DB&quot;], &quot;tatMin&quot;: &quot;2<em>ms&quot;, &quot;tat&quot;:&quot;5</em>ms&quot;},
    &quot;sequence&quot;: [
      {&quot;tatMin&quot;:30, &quot;tat&quot;:50, &quot;note&quot;:&quot;select A&quot;},
      {&quot;tatMin&quot;:50, &quot;tat&quot;:50, &quot;note&quot;:&quot;updateB&quot;, &quot;hold&quot;:&quot;TBL_B&quot;},
      {&quot;tatMin&quot;:80, &quot;tat&quot;:100,&quot;note&quot;:&quot;updateC&quot;, &quot;hold&quot;:&quot;TBL_C&quot;}
    ]}},</p>
<blockquote>
<p>オンライン取引１(ON-1)：１ユーザあたり3～10秒の取引を60回発行、Web-AP-DBの３層AP、各レイヤ呼出し時に2～5msの通信遅延あり、
　処理内容 30～50ms 参照排他なしSQL　＞　50ms TBL_B排他SQL　＞ 80~100ms TBL_C排他SQL（更新処理を想定）</p>
</blockquote>
<p> { &quot;ON-2&quot; : {
    &quot;times&quot;: 60, &quot;thinkTimeMin&quot;:&quot;500<em>ms&quot;, &quot;thinkTime&quot;: &quot;1</em>sec&quot;,
    &quot;baseModel&quot;:  {&quot;holds&quot;: [&quot;WEB&quot;,&quot;AP&quot;,&quot;DB&quot;], &quot;tatMin&quot;: &quot;2<em>ms&quot;, &quot;tat&quot;:&quot;5</em>ms&quot;},
    &quot;sequence&quot;: [
      {&quot;tatMin&quot;:&quot;100<em>ms&quot;, &quot;tat&quot;:&quot;500</em>ms&quot;, &quot;hold&quot;:&quot;&quot;}
    ]}},</p>
<blockquote>
<p>オンライン取引２(ON-2)：１ユーザあたり500ミリ秒~1秒の取引を60回発行、Web-AP-DBの３層AP、各レイヤ呼出し時に2～5msの通信遅延あり、
　処理内容 100～500ms 排他なし（一覧参照処理を想定）</p>
</blockquote>
<p> { &quot;BATCH-1&quot; : {
    &quot;baseModel&quot;:  {&quot;holds&quot;: [&quot;DB&quot;], &quot;tatMin&quot;: &quot;2<em>ms&quot;, &quot;tat&quot;:&quot;5</em>ms&quot;},
    &quot;sequence&quot;: [
      {&quot;tatMin&quot;:&quot;2<em>sec&quot;,&quot;tat&quot;:&quot;5</em>sec&quot;,&quot;note&quot;:&quot;updateB&quot;,&quot;hold&quot;:&quot;TBL_B&quot;}
    ]}}</p>
<blockquote>
<p>バッチ取引２(BATCH-1)：１ユーザあたり１ジョブ実行、DB更新のみ、各レイヤ呼出し時に2～5msの通信遅延あり、
処理内容 2～5秒 TBL_Bを排他（長時間トランザクションのオン中バッチを想定）</p>
</blockquote>
<p>],</p>
<p>&quot;clients&quot; : [</p>
<blockquote>
<p> &quot;clients：仮想アプリケーションの起動クライアントの定義&quot;,
 &quot;num:作成クライアント数、start～endの間で、ランダム（指数分布）に指定回数起動する&quot;,
 &quot;start/end:仮想クライアント作成/終了時刻、先頭で宣言したstartからの相対時刻&quot;,
 &quot;model:modelsで宣言したモデル名&quot;,
 &quot;user:user+通番 のユーザ名で仮想クライアントが作成される&quot;,</p>
</blockquote>
<p>  {&quot;num&quot;:100,&quot;start&quot;:&quot;16.0<em>h&quot;, &quot;end&quot;:&quot;17.0</em>h&quot;, &quot;model&quot;:&quot;ON-1&quot;,  &quot;user&quot; :&quot;userU&quot;, &quot;message&quot;:&quot;select A update B,C&quot;},</p>
<blockquote>
<p>16:00～17:00の 1時間に、userU00～userU99の100ユーザが、各々ON-1（更新系）を100回発行</p>
</blockquote>
<p>  {&quot;num&quot;: 20,&quot;start&quot;:&quot;16.5<em>h&quot;, &quot;end&quot;:&quot;16.6</em>h&quot;, &quot;model&quot;:&quot;ON-1&quot;,  &quot;user&quot; :&quot;userT&quot;, &quot;message&quot;:&quot;select A update B,C 【増】&quot;},</p>
<blockquote>
<p>16:30～16:36 の6分間に、userT00～userT19の20ユーザが、各々ON-1（更新系）を20回発行（一時的に更新オン取引200%増）</p>
</blockquote>
<p>  {&quot;num&quot;:100,&quot;start&quot;:&quot;16.0<em>h&quot;, &quot;end&quot;:&quot;17.0</em>h&quot;, &quot;model&quot;:&quot;ON-2&quot;,  &quot;user&quot; :&quot;userS&quot;, &quot;message&quot;:&quot;排他なし(WEBのみ)&quot;},</p>
<blockquote>
<p>16:00～17:00 の1時間に、userS00～userS99の100ユーザが、各々ON-2（参照系）を100回発行</p>
</blockquote>
<p>  {&quot;num&quot;: 20,&quot;start&quot;:&quot;16.0<em>h&quot;, &quot;end&quot;:&quot;17.0</em>h&quot;, &quot;model&quot;:&quot;BATCH-1&quot;,&quot;user&quot;:&quot;userB&quot;, &quot;message&quot;:&quot;バッチ処理 update B＊＊＊＊＊&quot;}</p>
<blockquote>
<p>16:00～17:00 に、userBが、BATCH-1（更新系）を20回発行</p>
</blockquote>
<p>]
}</p>
<blockquote>
</blockquote>
<h3 id="simulator-99">Simulator-99</h3>
<h2 id="サンプル99for-testの仕様-↑">サンプル99(for test)の仕様　<a href="#">↑</a></h2>
<ul>
<li>概要</li>
</ul>
<p><strong>デッドロックが発生し、タイムアウトで解消</strong></p>
<p>デグレードテスト用シナリオを兼ねる（描画バリエーションの網羅率の高い短いシナリオ）</p>
<ul>
<li>詳細</li>
</ul>
<p>{
&quot;log&quot; : 1,
&quot;start&quot; : &quot;1970/01/02 00:00:00.000&quot;,
&quot;end&quot;   : &quot;30.0*sec&quot;,</p>
<blockquote>
<p>2017/01/02 00:00:00.000 を基準、最大30秒後までシミュレーション実行、エラーログのみ出力</p>
</blockquote>
<p>&quot;resources&quot; : [
  {&quot;type&quot; :&quot;DB&quot;,  &quot;thread&quot;:2,  &quot;timeout&quot;: &quot;5<em>sec&quot;, &quot;q&quot;:1,  &quot;qWait&quot;:&quot;2</em>sec&quot;}
],</p>
<blockquote>
<p>DBサーバ：2スレッド、DBトランザクションタイムアウトエラー：5秒、コネクションプール：1個、コネクション取得待ち：2秒でエラー</p>
</blockquote>
<p>&quot;models&quot; : [
 { &quot;TEST-AB&quot; : {
    &quot;baseModel&quot;:  {&quot;holds&quot;: [&quot;DB&quot;], &quot;tatMin&quot;: &quot;2<em>ms&quot;, &quot;tat&quot;:&quot;2</em>ms&quot;},
    &quot;sequence&quot;: [{&quot;hold&quot;:&quot;TBL_A&quot;, &quot;tatMin&quot;:&quot;1<em>sec&quot;, &quot;tat&quot;:&quot;1</em>sec&quot;}],
    &quot;sequence&quot;: [{&quot;hold&quot;:&quot;TBL_B&quot;, &quot;tatMin&quot;:&quot;3<em>sec&quot;, &quot;tat&quot;:&quot;3</em>sec&quot;}],
    &quot;times&quot;: 2, &quot;thinkTimeMin&quot;:&quot;1<em>sec&quot;, &quot;thinkTime&quot;: &quot;1</em>sec&quot;}},</p>
<blockquote>
<p>バッチ取引AB(TEST-AB)：１ユーザあたり１秒毎に２回迄ジョブ起動、DB更新のみ、</p>
<p>処理内容 3.007秒処理（開始 ＞ 1+2ms&gt;DB排他&gt;TBL_A排他 ＞ 1+2ms+３秒&gt;TBL_B排他 ＞ 1ms&gt;排他解放 ＞ 1ms終了）＋1秒＋3.008秒処理</p>
</blockquote>
<p> { &quot;TEST-BA&quot; : {
    &quot;baseModel&quot;:  {&quot;holds&quot;: [&quot;DB&quot;], &quot;tatMin&quot;: &quot;2<em>ms&quot;, &quot;tat&quot;:&quot;2</em>ms&quot;},
    &quot;sequence&quot;: [{&quot;hold&quot;:&quot;TBL_B&quot;, &quot;tatMin&quot;:&quot;1<em>sec&quot;, &quot;tat&quot;:&quot;1</em>sec&quot;}],
    &quot;sequence&quot;: [{&quot;hold&quot;:&quot;TBL_A&quot;, &quot;tatMin&quot;:&quot;3<em>sec&quot;, &quot;tat&quot;:&quot;3</em>sec&quot;}],
    &quot;times&quot;: 2, &quot;thinkTimeMin&quot;:&quot;1<em>sec&quot;, &quot;thinkTime&quot;: &quot;1</em>sec&quot;}}
    ],</p>
<blockquote>
<p>バッチ取引BA(TEST-BA)：１ユーザあたり１秒毎に２回迄ジョブ起動、DB更新のみ、</p>
<p>処理内容 3.007秒処理（開始 ＞ 1+2ms&gt;DB排他&gt;TBL_B排他 ＞ 1+2ms+３秒&gt;TBL_A排他 ＞ 1ms&gt;排他解放 ＞ 1ms終了）＋1秒＋3.008秒処理</p>
</blockquote>
<p>&quot;clients&quot; : [</p>
<blockquote>
</blockquote>
<p>  {&quot;num&quot;: 1,&quot;start&quot;:&quot;0<em>sec&quot;, &quot;end&quot;:&quot;0</em>sec&quot;, &quot;model&quot;:&quot;TEST-AB&quot;,&quot;user&quot; :&quot;testAB1&quot;},</p>
<blockquote>
<p>1回目：0.001秒に、ユーザtestAB10が、TEST-AB起動（排他待ちなし、3.007秒で正常終了:N_000)</p>
<p>2回目：4.007秒に、ユーザtestAB10が、TEST-AB起動（DBコネクションキューオーバフロー、0.001秒で終了:E_QoF）</p>
</blockquote>
<p>  {&quot;num&quot;: 1,&quot;start&quot;:&quot;1<em>sec&quot;, &quot;end&quot;:&quot;1</em>sec&quot;, &quot;model&quot;:&quot;TEST-AB&quot;,&quot;user&quot; :&quot;testAB2&quot;},</p>
<blockquote>
<p>1回目：1.000秒に、ユーザtestAB20が、TEST-AB起動（デッドロック DBトランザクションタイムアウト5.000秒でエラー終了:E_HTO）</p>
<p>2回目：7.000秒に、ユーザtestAB20が、TEST-AB起動（3.007秒で正常終了:N_000）</p>
</blockquote>
<p>  {&quot;num&quot;: 1,&quot;start&quot;:&quot;3<em>sec&quot;, &quot;end&quot;:&quot;3</em>sec&quot;, &quot;model&quot;:&quot;TEST-BA&quot;,&quot;user&quot; :&quot;testBA3&quot;},</p>
<blockquote>
<p>1回目：3.000秒に、ユーザtestBA30が、TEST-BA起動（testAB10のDB解放待ち0.007秒を加えた、3.014秒で正常終了:N_000）</p>
<p>2回目：7.014秒に、ユーザtestBA30が、TEST-BA起動（5.005秒で正常終了:N_000）</p>
</blockquote>
<p>  {&quot;num&quot;: 1,&quot;start&quot;:&quot;4<em>sec&quot;, &quot;end&quot;:&quot;4</em>sec&quot;, &quot;model&quot;:&quot;TEST-BA&quot;,&quot;user&quot; :&quot;testBA4&quot;}</p>
<blockquote>
<p>1回目：4.001秒に、ユーザtestBA40が、TEST-BA起動（5.014秒で正常終了:N_000）</p>
<p>2回目：3.000秒に、ユーザtestBA40が、TEST-BA起動（デッドロック DBトランザクションタイムアウト5.000秒でエラー終了:E_HTO）</p>
</blockquote>
<p> ]
}</p>
<blockquote>
</blockquote>
<p>　<a href="#">go to top ↑</a></p>
</body>
</html>

'; */